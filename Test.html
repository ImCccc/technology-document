<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <style>
    #draggable {
      width: 200px;
      height: 20px;
      text-align: center;
      background: white;
    }

    .dropzone {
      width: 200px;
      height: 20px;
      background: blueviolet;
      margin-bottom: 10px;
      padding: 10px;
    }

    .xxx {
      width: 600px;
      height: 200px;
      border: 3px solid;
    }
  </style>
  <div class="dropzone">
    <div
      id="draggable"
      draggable="true"
      ondragstart="event.dataTransfer.setData('text/plain',null)"
    >
      This div is draggable
    </div>
  </div>
  <div class="dropzone"></div>
  <div class="dropzone"></div>
  <div class="dropzone"></div>
  <div id="xxx" class="xxx"></div>
  <input id="input" type="text" />
  <script>
    var dragged;

    var draggabledom = document.getElementById("draggable");

    /* 拖动目标元素时触发 drag 事件 */
    // document.addEventListener(
    draggabledom.addEventListener("drag", (event) => 1, false);

    draggabledom.addEventListener(
      "dragstart",
      function (event) {
        dragged = event.target;
        event.target.style.background = "red";
        console.log("dragstart");
      },
      false
    );

    draggabledom.addEventListener(
      "dragend",
      function (event) {
        event.target.style.background = "";
        // console.log("dragend");
      },
      false
    );

    /* 放置目标元素时触发事件 */
    document.addEventListener(
      "dragover",
      function (event) {
        console.log("dragover");
        // 阻止默认动作以启用 drop
        event.preventDefault();
      },
      false
    );

    document.addEventListener(
      "dragenter",
      function (event) {
        // 当可拖动的元素进入可放置的目标时高亮目标节点
        if (event.target.className == "dropzone") {
          event.target.style.background = "purple";
          // console.log("dragenter");
        }
      },
      false
    );

    document.addEventListener(
      "dragleave",
      function (event) {
        // 当拖动元素离开可放置目标节点，重置其背景
        if (event.target.className == "dropzone") {
          // console.log("dropzone");
          event.target.style.background = "";
        }
      },
      false
    );

    document.addEventListener(
      "drop",
      function (event) {
        console.log("drop");
        // 阻止默认动作（如打开一些元素的链接）
        event.preventDefault();
        // 将拖动的元素到所选择的放置目标节点中
        if (event.target.className == "dropzone") {
          event.target.style.background = "";
          dragged.parentNode.removeChild(dragged);
          event.target.appendChild(dragged);
        }
      },
      false
    );
  </script>

  <script>
    var dom = document.getElementById("input");

    // 系统 click 事件
    dom.addEventListener("click", (e) => {
      console.log("isTrusted: ", e.isTrusted); // { data: 'params' }
    });
    dom.dispatchEvent(new Event("click"));

    // 自定义事件，传递数据
    dom.addEventListener("build2", (e) => {
      console.log("isTrusted: ", e.isTrusted);
    });
    dom.dispatchEvent(
      new CustomEvent("build2", { detail: { data: "params" } })
    );
  </script>
</html>
